%fprintf('Color Sensor RGB: R=%d, G=%d, B=%d\n', color(1), color(2), color(3));    
 
    [front, side, side1] = checkDist(brick);


pause(1);

    [front, side, side1] = checkDist(brick);


pause(3);

    [front, side, side1] = checkDist(brick);

timer = 0;
Forward(brick);

while(true)
    [front, side, side1] = checkDist(brick);
    checkColor(brick);
    % --- SAFETY CHECKS ALWAYS ACTIVE ---
    if(timer == 0)
        if(side < 4)
            disp('Obstacle VERY close on left → backing up left');
            backUpLeft(brick);
            Forward(brick);
            timer = 0.5;
            continue;   % Restart loop after emergency action
        end
        if(side1 < 4)
            disp('Obstacle VERY close on right → backing up right');
            backUpRight(brick);
            Forward(brick);
            timer = 0.5;
            continue;   % Restart loop after emergency action
        end
    % --- END SAFETY CHECKS ---

    % --- TIMER ONLY AFFECTS TURN / FORWARD LOGIC ---
    
        if (side<=20)
            if(front>=23)
                disp('Moving Forward');
            else
                disp('Turning Right');
                brick.StopAllMotors();
                turnRight(brick);
                Forward(brick);
                timer = 5;
            end
        else
            disp('Turning left and Forward');
            brick.StopAllMotors();
            turnLeft(brick);
            Forward(brick);
            timer = 5;
        end
    else
        timer = timer -1 ;
        pause(1);
        disp(timer);
    end
end

%fprintf('Color Sensor RGB: R=%d, G=%d, B=%d\n', color(1), color(2), color(3));
%Color Sensor RGB: R=160, G=73, B=33 --> yellow -> manual mode
%Color Sensor RGB: R=37, G=46, B=52 --> white line stop for 5 seconds
%Color Sensor RGB: , G=44, B=97 --> blue -> open claw
%Color Sensor RGB: R=17, G=63, B=46 --> green -> start point

% Your robot stops for one second when it sees white line.
% Your robot stops and beeps two times when it sees blue.
% Your robot stops and beeps three times when it sees green.
