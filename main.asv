
%fprintf('Color Sensor RGB: R=%d, G=%d, B=%d\n', color(1), color(2), color(3));
front = brick.UltrasonicDist(3);
side = brick.UltrasonicDist(2);
side1 = brick.UltrasonicDist(4);
fprintf('first Ultrasonic Sensor 3 Distance: %.2f cm\n', front);
fprintf('first Ultrasonic Sensor 2 Distance: %.2f cm\n', side); %left
fprintf('first Ultrasonic Sensor 4 Distance: %.2f cm\n', side1); %right

pause(3);

front = brick.UltrasonicDist(2); % front distance to anything straight ahead
side = brick.UltrasonicDist(3); 
side1 = brick.UltrasonicDist(4);




fprintf('first Ultrasonic Sensor 3 Distance: %.2f cm\n', front);
fprintf('first Ultrasonic Sensor 2 Distance: %.2f cm\n', side); %left
fprintf('first Ultrasonic Sensor 4 Distance: %.2f cm\n', side1); %right

%brick.MoveMotor('A', 62);
%brick.MoveMotor('B', 50);
%pause(5);% before first turn
%brick.StopMotor('AB', 'Brake');
timer = 0;
Forward(brick);
while(true)
    if(timer == 0)
        if(side1 < 7)
            disp('Obstacle VERY close on left → backing up left');
            backUpleft(brick);
            [front, side, side1, side2] = checkDist(brick);
            continue;   % Restart loop after emergency action
        elseif(side2 < 7)
            disp('Obstacle VERY close on right → backing up right');
            backUpRight(brick);
            [front, side, side1, side2] = checkDist(brick);
            continue;   % Restart loop after emergency action
        end

        if (side<=20)
            if(front>=23)
                disp('Moving Forward');
                [front, side] = checkDist(brick);
            else
                disp('Turning Right');
                brick.StopAllMotors();
                turnRight(brick);
                Forward(brick);
                timer = 3;
                [front, side] = checkDist(brick);
            end
        else
            disp('Turning left and Forward');
            brick.StopAllMotors();
            turnLeft(brick);
            Forward(brick);
            timer = 3;
            [front, side] = checkDist(brick);
        end
    else
        timer = timer -1 ;
        pause(1);
        disp(timer);
    end
end
%fprintf('Color Sensor RGB: R=%d, G=%d, B=%d\n', color(1), color(2), color(3));
%Color Sensor RGB: R=160, G=73, B=33 --> yellow -> manual mode
%Color Sensor RGB: R=37, G=46, B=52 --> white line stop for 5 seconds
%Color Sensor RGB: , G=44, B=97 --> blue -> open claw
%Color Sensor RGB: R=17, G=63, B=46 --> green -> start point

% Your robot stops for one second when it sees white line.
% Your robot stops and beeps two times when it sees blue.
% Your robot stops and beeps three times when it sees green.


